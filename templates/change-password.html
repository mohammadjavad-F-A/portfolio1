{% extends 'master.html' %}
{% load static %}
<!DOCTYPE html>
<html lang="fa">
{% block content %}

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ورود</title>
  <link href="https://cdn.fontcdn.ir/Font/Persian/Vazir/Vazir.css" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'assets/style.css' %}">
  <style>
    body { background: #f7f7f7; font-family: 'Vazir',Tahoma,sans-serif; }
    .auth-page {margin-top: -200px; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
    .auth-box {
      background: #fff;
      border-radius: 18px;
      box-shadow: 0 4px 24px rgba(80,201,195,0.13);
      padding: 38px 32px 32px 32px;
      min-width: 320px;
      max-width: 98vw;
      display: flex;
      flex-direction: column;
      align-items: center;
      opacity: 0;
      transform: translateY(60px) scale(0.97);
      animation: fadeInUp 0.8s cubic-bezier(.68,-0.55,.27,1.55) forwards;
    }
    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(60px) scale(0.97);
      }
      80% {
        opacity: 1;
        transform: translateY(-8px) scale(1.03);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }
    .auth-box h2 { font-size: 1.3rem; color: #232526; margin-bottom: 18px; }
    .auth-form { width: 100%; display: flex; flex-direction: column; gap: 12px; }
    .auth-input { padding: 10px 14px; border-radius: 8px; border: 1px solid #e0e0e0; font-size: 1rem; }
    .auth-btn { background: linear-gradient(90deg,#50c9c3 0%,#232526 100%); color: #fff; border: none; border-radius: 8px; padding: 10px 0; font-size: 1rem; font-weight: bold; cursor: pointer; transition: background 0.2s; }
    .auth-btn:hover { background: linear-gradient(90deg,#232526 0%,#50c9c3 100%); }
    .auth-link { margin-top: 18px; font-size: 0.98rem; color: #232526; }
    .auth-link a { color: #50c9c3; text-decoration: underline; font-weight: bold; }
    .site-footer {
      margin-top: 38px !important;
      margin-bottom: 0;
      position: relative;
      bottom: auto;
    }
    @media (max-width: 700px) {
  .auth-page {
    margin-top: 0 !important;
    min-height: unset !important;
    padding: 0 !important;
    width: 100vw !important;
    box-sizing: border-box !important;
    display: flex !important;
    align-items: flex-start !important;
    justify-content: center !important;
    margin-bottom: 0 !important;
  }
  .auth-box {
    max-width: 98vw !important;
    min-width: 0 !important;
    width: 96vw !important;
    padding: 16px 8px 16px 8px !important;
    border-radius: 12px !important;
    box-sizing: border-box !important;
    margin: 18px auto 18px auto !important;
  }
  .auth-form {
    gap: 8px !important;
    width: 100% !important;
  }
  .auth-input {
    font-size: 0.95rem !important;
    padding: 8px 8px !important;
    border-radius: 7px !important;
    width: 100% !important;
    box-sizing: border-box !important;
  }
  .auth-btn {
    font-size: 0.97rem !important;
    padding: 10px 0 !important;
    border-radius: 8px !important;
    width: 100% !important;
    box-sizing: border-box !important;
    margin-top: 10px !important;
  }
  </style>
</head>
<body>
{% include '_partials/messages.html' %}
  <div class="main-bg">

  <div class="auth-page">
    <div class="auth-box">
      <h2>تغییر رمز عبور</h2>
      <form class="auth-form" action="{% url 'change_password' %}" method="post">
          {% csrf_token %}
        <input type="email" placeholder="ایمیل خود را وارد کنید" class="auth-input" name="email" required>
        <input type="password" placeholder="رمز فعلی خود را وارد کنید" class="auth-input" name="password" required>
        <input type="password" placeholder="رمز جدید را وارد کنید" class="auth-input" name="new_password" required>
                 <input type="password" placeholder="تکرار رمز عبور جدید" class="auth-input" name="confirm_password" required>
        <button type="submit" class="auth-btn">تغییر رمز</button>
      </form>

    </div>
  </div>

      <script>
function toggleMenu() {
    var mobileMenu = document.getElementById('mobileMenu');
    var menuIcon = document.querySelector('.navbar-menu-icon');
    if (window.innerWidth <= 700) {
        var isOpen = (mobileMenu.style.display === 'none' || mobileMenu.style.display === '') ? false : true;
        mobileMenu.style.display = isOpen ? 'none' : 'flex';
        if (!isOpen) menuIcon.classList.add('active');
        else menuIcon.classList.remove('active');
    }
}
window.addEventListener('resize', function() {
    var mobileMenu = document.getElementById('mobileMenu');
    if (window.innerWidth > 700) {
        mobileMenu.style.display = 'none';
    }
});
document.getElementById('exitBtn').onclick = function(e) {
    e.preventDefault();
    window.location.href = 'https://www.google.com'; // یا هر آدرس خروجی دلخواه
};
function showSignup() {
  document.getElementById('signup-page').style.display = 'block';
  document.getElementById('login-page').style.display = 'none';
}
function showLogin() {
  document.getElementById('signup-page').style.display = 'none';
  document.getElementById('login-page').style.display = 'block';
}
// نمایش صفحه بر اساس آدرس هشتگ
window.addEventListener('hashchange', function() {
  if (location.hash === '#signup') showSignup();
  else if (location.hash === '#login') showLogin();
  else {
    document.getElementById('signup-page').style.display = 'none';
    document.getElementById('login-page').style.display = 'none';
  }
});
document.getElementById('mobileProfileBtn').onclick = function(e) {
    e.stopPropagation();
    var menu = document.getElementById('mobileProfileMenu');
    menu.style.display = (menu.style.display === 'none' || menu.style.display === '') ? 'flex' : 'none';
};
document.addEventListener('click', function(e) {
    var menu = document.getElementById('mobileProfileMenu');
    if(menu) menu.style.display = 'none';
});
</script>
  </div>
</body>
{% endblock content %}
</html>